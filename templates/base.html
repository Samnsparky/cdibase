<!DOCTYPE html>
<html>

    <!-- Base HTML file from which other templates are inherited.

    Copyright (C) 2014 A. Samuel Pottinger ("Sam Pottinger", gleap.org)

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
    -->

    <head>
        <title>CdiBase</title>
        <!-- Bootstrap -->
        <link href="/static/css/bootstrap.min.css" rel="stylesheet">
        <link href="/static/css/bootstrap-reboot.min.css" rel="stylesheet">
        <link href="/static/css/bootstrap-grid.min.css" rel="stylesheet">
        <!-- Custom -->
        <link href="/static/css/custom.css" rel="stylesheet">
        {% block head %}
        {% endblock %}
    </head>
    <body>
        <nav>
            <div class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="navbar-header">
                    <a class="navbar-brand" href="/base">CdiBase</a>
                </div>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                    <ul class="navbar-nav">
                        {% if user %}

                        {% if user.can_access_data %}
                        <li class="nav-item {% if cur_page == "access_data" %}active{% endif %}"><a class="nav-link" href="/base/access_data">Access Data{% if cur_page == "access_data" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_enter_data %}
                        <li class="nav-item {% if cur_page == "enter_data" %}active{% endif %}"><a class="nav-link" href="/base/enter_data">Enter Data{% if cur_page == "enter_data" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_delete_data %}
                        <li class="nav-item {% if cur_page == "delete_data" %}active{% endif %}"><a class="nav-link" href="/base/delete_data">Delete Data{% if cur_page == "delete_data" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_import_data %}
                        <li class="nav-item {% if cur_page == "import_data" %}active{% endif %}"><a class="nav-link" href="/base/import_data">Import{% if cur_page == "import_data" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_enter_data %}
                        <li class="nav-item {% if cur_page == "edit_data" %}active{% endif %}"><a class="nav-link" href="/base/edit_data">Update Participants{% if cur_page == "edit_data" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_edit_parents %}
                        <li class="nav-item {% if cur_page == "edit_parents" %}active{% endif %}"><a class="nav-link" href="/base/parent_accounts">Parents{% if cur_page == "edit_parents" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_change_formats %}
                        <li class="nav-item {% if cur_page == "edit_formats" %}active{% endif %}"><a class="nav-link" href="/base/edit_formats">Formats{% if cur_page == "edit_formats" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_admin %}
                        <li class="nav-item {% if cur_page == "edit_users" %}active{% endif %}"><a class="nav-link" href="/base/edit_users">Users{% if cur_page == "edit_users" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        {% if user.can_use_api_key %}
                        <li class="nav-item {% if cur_page == "conifg_api_key" %}active{% endif %}"><a class="nav-link" href="/base/config_api_key">API{% if cur_page == "conifg_api_key" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        {% endif %}

                        <li class="nav-item {% if cur_page == "account" %}active{% endif %}"><a class="nav-link" href="/base/account">Your Account{% if cur_page == "account" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>
                        <li class="nav-item {% if cur_page == "logout" %}active{% endif %}"><a class="nav-link" href="/base/account/logout">Logout{% if cur_page == "logout" %}<span class="sr-only">(Current)</span>{% endif %}</a></li>

                        {% endif %}
                    </ul>
                </div>
            </div>

        </nav>
        <main>
            <div class="content">
                {% if confirmation %}<p class="confirmation">[Confirm] {{ confirmation }}</p>{% endif %}
                {% if error %}<p class="error">[Error] {{ error }}</p>{% endif %}

                {% block contents %}
                {% endblock %}
            </div>
            <script type="text/javascript" src="/static/js/jquery-3.5.1.min.js"></script>
            <script type="text/javascript" src="/static/js/bootstrap.bundle.min.js"></script>
            <script type="text/javascript" src="/static/js/toasts.js"></script>
            {% if scroll %}
            <script type="text/javascript">$(window).scrollTop($(document).height());</script>
            {% endif %}
            {% block jsinclude %}
            {% endblock %}
        </main>
    </body>
</html>
