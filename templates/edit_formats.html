{% extends "base.html" %}

{% block jsinclude %}
<script type="text/javascript" src="/static/js/edit_formats.js"></script>
{% endblock %}

{% block contents %}
<!-- Interface allowing users to edit internal CDI metadata.

Copyright (C) 2014 A. Samuel Pottinger ("Sam Pottinger", gleap.org)

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<div class="jumbotron">
    <div class="container">
        <h3>Configure the presentation and formatting of CDIs.</h3>
        <p>
            To support many software packages, CdiBase supports many different types of CDIs and data formatting options. These formats are defined through YAML files as described in the project wiki.
        </p>
    </div>
</div>
<div class="format-control">
    <h3>CDI Formats</h3>
    <table class="table table-striped"><tbody>
    {% for format in cdi_formats %}
        <tr>
            <td>{{ format.human_name }}</td>
            <td><a href="/base/edit_formats/download/{{ format.filename }}">download</a></td>
            <td><a href="/base/edit_formats/cdi/{{ format.safe_name }}/delete">delete</a></td>
        </tr>
    {% endfor %}
    </tbody></table>
    <a href="/base/edit_formats/cdi/_add">Upload new CDI format >></a>
</div>
<div class="format-control">
    <h3>Data Presentation Formats</h3>
    <table class="table table-striped"><tbody>
    {% for format in presentation_formats %}
        <tr>
            <td>{{ format.human_name }}</td>
            <td><a href="/base/edit_formats/download/{{ format.filename }}">download</a></td>
            <td><a href="/base/edit_formats/presentation/{{ format.safe_name }}/delete">delete</a></td>
        </tr>
    {% endfor %}
    </tbody></table>
    <a href="/base/edit_formats/presentation/_add">Upload new presentation format >></a>
</div>
<div class="format-control">
    <h3>CDI Percentile Tables</h3>
    <div id="recalc-start" class="long-detail">Note that existing percentile calculations will not automatically be updated when adding a new percentile table here. Do you need to recalculate percentiles with a newly uploaded percentile table? <a id="recalc-link" href="/base/edit_formats/recalc">Recalculate all ages and percentiles using the current percentile tables >></a></div>
    <div id="recalc-end" class="long-running-op-display"><img src="/static/img/ajax-loader.gif"> Recalculating...</div>
    <table class="table table-striped"><tbody>
    {% for table in percentile_tables %}
        <tr>
            <td>{{ table.human_name }}</td>
            <td><a href="/base/edit_formats/download/{{ table.filename }}">download</a></td>
            <td><a href="/base/edit_formats/percentile/{{ table.safe_name }}/delete">delete</a></td>
        </tr>
    {% endfor %}
    </tbody></table>
    <a href="/base/edit_formats/percentile/_add">Upload new percentile table >></a>
</div>
{% endblock %}
